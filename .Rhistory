df %>% ggplot() + geom_bar(mapping=aes(x=sex, fill=season), position = 'dodge') +
labs(x='Sex',
y='Count',
fill = 'Season',
title = 'Count of Sex By Season',
caption = 'All seasons admit around the same amount of patients, but spring admits the most. There are more female patients admitted than male.')
df %>% ggplot() + geom_bar(mapping=aes(x=sex, fill=season), position = 'dodge') +
labs(x='Sex',
y='Count',
fill = 'Season',
title = 'Count of Sex By Season',
caption = 'All seasons admit around the same amount of patients, but spring admits the most. There are more female patients admitted than male.')
df %>% ggplot() + geom_bar(mapping=aes(x=age, fill=season), position = 'fill') +
labs(x='Age',
y='Percent',
fill = 'Season',
title = 'Percent of Age Per Season',
caption = 'Generally all ages have similar admission levels per season.')
df %>% filter(age>=65) %>% ggplot() + geom_bar(mapping=aes(x=sex, fill=season)) +
labs(x='Sex',
y='Count',
fill = 'Season',
title = 'Count of Sex By Season for Senior Citizens',
caption = 'Senior citizens of both genders seem to be hospitalized a little more in Winter and Fall than the other two seasons. Females are hospitalized more than males are.')
df %>% ggplot()+
geom_density(mapping = aes(x = age, color=provider))+
labs(x="Age", y="Density", title = "Age Distribution by Provider", caption='Almost all of the providers have similar age distributions except for 7214 and 7216.')
df %>% ggplot()+
geom_bar(mapping = aes(x = pt_state))+
labs(x="State of Patient", y="Count", title = "State Location of Patients Distribution", caption='Rhode Island is the most common state.')
df %>% ggplot()+
geom_bar(mapping = aes(x = sex))+
labs(x="Sex", y="Count", title = "Sex Distribution", caption="Females are most commonly admitted")
library(ggplot2)
df$sex = case_when(df$sex == 1 ~ 'Male',
df$sex == 2 ~ 'Female',
TRUE ~ 'Unknown')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=los)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Length of Stay',
title = 'Length of Stay by Age and Sex',
caption = 'Younger people of both genders seem to generally have longer stays than older people. The plots are similar between the two genders.')
df %>% ggplot() + geom_bar(mapping=aes(x=sex, fill=season), position = 'dodge') +
labs(x='Sex',
y='Count',
fill = 'Season',
title = 'Count of Sex By Season',
caption = 'All seasons admit around the same amount of patients, but spring admits the most. There are more female patients admitted than male.')
View(df)
df %>% ggplot()+
geom_density(mapping = aes(x = age, color=provider))+
labs(x="Age", y="Density", title = "Age Distribution by Provider", caption='Almost all of the providers have similar age distributions except for 7214 and 7216.')
df %>% ggplot()+
geom_bar(mapping = aes(x = pt_state))+
labs(x="State of Patient", y="Count", title = "State Location of Patients Distribution", caption='Rhode Island is the most common state.')
library(ggplot2)
df$sex = case_when(df$sex == 1 ~ 'Male',
df$sex == 2 ~ 'Female',
TRUE ~ 'Unknown')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=los)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Length of Stay',
title = 'Length of Stay by Age and Sex',
caption = 'Younger people of both genders seem to generally have longer stays than older people. The plots are similar between the two genders.')
df %>% ggplot()+
geom_density(mapping = aes(x = age)) +
labs(x="Age", y="Density", title = "Age Distribution", caption='It is more common that people in their 60s are admitted than any other age range.')
df %>% ggplot()+
geom_density(mapping = aes(x = age, color=provider))+
labs(x="Age", y="Density", title = "Age Distribution by Provider", caption='Almost all of the providers have similar age distributions except for 7214 and 7216.')
df %>% ggplot()+
geom_bar(mapping = aes(x = pt_state))+
labs(x="State of Patient", y="Count", title = "State Location of Patients Distribution", caption='Rhode Island is the most common state.')
df %>% ggplot()+
geom_bar(mapping = aes(x = sex))+
labs(x="Sex", y="Count", title = "Sex Distribution", caption="Females are most commonly admitted")
df %>% ggplot()+geom_point(aes(x=age, y=los))+
labs(x="Age", y="Length of Stay", title = "Length of Stay by Age", caption="The average length of stay is typically longer for people around the age of 30")
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = sex))+
labs(x='Age',
y='Sex',
title='Age Distributions Based on Sex',
caption='A box plot displaying summary
statistics for patient age for each sex.')
library(ggplot2)
df$sex = case_when(df$sex == 1 ~ 'Male',
df$sex == 2 ~ 'Female',
TRUE ~ 'Unknown')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=los)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Length of Stay',
title = 'Length of Stay by Age and Sex',
caption = 'Younger people of both genders seem to generally have longer stays than older people. The plots are similar between the two genders.')
df %>% ggplot()+
geom_density(mapping = aes(x = age)) +
labs(x="Age", y="Density", title = "Age Distribution", caption='It is more common that people in their 60s are admitted than any other age range.')
df %>% ggplot()+
geom_density(mapping = aes(x = age, color=provider))+
labs(x="Age", y="Density", title = "Age Distribution by Provider", caption='Almost all of the providers have similar age distributions except for 7214 and 7216.')
df %>% ggplot()+
geom_bar(mapping = aes(x = pt_state))+
labs(x="State of Patient", y="Count", title = "State Location of Patients Distribution", caption='Rhode Island is the most common state.')
df %>% ggplot()+
geom_bar(mapping = aes(x = sex))+
labs(x="Sex", y="Count", title = "Sex Distribution", caption="Females are most commonly admitted")
df %>% ggplot()+geom_point(aes(x=age, y=los))+
labs(x="Age", y="Length of Stay", title = "Length of Stay by Age", caption="The average length of stay is typically longer for people around the age of 30")
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = sex))+
labs(x='Age',
y='Sex',
title='Age Distributions Based on Sex',
caption='A box plot displaying summary statistics for patient age for each sex.')
df %>% ggplot(aes(x = moa,y= tot,
color=sex1))+
geom_col()+
labs(title = 'moa vs total room and board', x = "Month of Admition", y = "Total expenses", caption = "August and October appear to have a higher total cost. This could be due to the increase in patients during these months.")
df %>% ggplot() + geom_point(mapping=aes(x=age, y=tot)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Total Charge',
title = 'Total Charge by Age and Sex',
caption = 'Most higher charges occur in very young patients and some middle-age males.')
df %>% group_by(sex,age) %>%
summarise(mean_charge = mean(tot)) %>% ggplot() +
geom_col(aes(x=age, y=mean_charge, fill=sex), position = 'dodge') +
labs(x='Age',
y='Average Total Charge',
fill = 'Sex',
title = 'Average Total Charge by Age and Sex',
caption = 'There is a high peak in average charge around age 15, primarily for males.Average total charge generally increases until age 70 and then decreases after.Males generally have the highest average total charges for most ages.')
df %>% group_by(sex,age) %>%
summarise(mean_charge = mean(tot)) %>% ggplot() +
geom_col(aes(x=age, y=mean_charge, fill=sex), position = 'dodge') +
labs(x='Age',
y='Average Total Charge',
fill = 'Sex',
title = 'Average Total Charge by Age and Sex',
caption = 'There is a peak in average change at the age of 15, especially for males. The average total charge generally increases until age 70 and then decreases after. And males generally have the highest average total charges for most ages.')
df %>% filter(pay_ub92 < 25) %>%  ggplot() +
geom_bar(mapping=aes(x=pay_ub92, fill=season), position = 'fill') + theme_dark() +
labs(x='Payment Type',
y='Percent',
fill = 'Season',
title = 'Percent of Payment Type Per Season',
caption = 'More uses of Blue Chip payment occur in Winter than any other month. Most payments types occur more in Fall and Winter than Spring and Summer.')
df %>% ggplot()+
geom_boxplot(mapping = aes(x = age, y = sex))+
labs(x="Age", y="Sex", title = "Age by Sex", caption="This shows the age between sex")
df %>% ggplot()+
geom_boxplot(mapping = aes(x = age, y = sex))+
labs(x="Age", y="sex", title = "Age by Sex", caption="Ages of admitted patients by sex")
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = provider))+
labs(x='Age',
y='Provider',
title='Age Distributions Based on Provider',
caption='A box plot displaying summary
statistics for patient age for each provider.')
library(ggplot2)
df$sex = case_when(df$sex == 1 ~ 'Male',
df$sex == 2 ~ 'Female',
TRUE ~ 'Unknown')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=los)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Length of Stay',
title = 'Length of Stay by Age and Sex',
caption = 'Younger people of both genders seem to generally have longer stays than older people. The plots are similar between the two genders.')
df %>% ggplot()+
geom_density(mapping = aes(x = age)) +
labs(x="Age", y="Density", title = "Age Distribution", caption='It is more common that people in their 60s are admitted than any other age range.')
df %>% ggplot()+
geom_density(mapping = aes(x = age, color=provider))+
labs(x="Age", y="Density", title = "Age Distribution by Provider", caption='Almost all of the providers have similar age distributions except for 7214 and 7216.')
df %>% ggplot()+
geom_bar(mapping = aes(x = pt_state))+
labs(x="State of Patient", y="Count", title = "State Location of Patients Distribution", caption='Rhode Island is the most common state.')
df %>% ggplot()+
geom_bar(mapping = aes(x = sex))+
labs(x="Sex", y="Count", title = "Sex Distribution", caption="Females are most commonly admitted")
df %>% ggplot()+geom_point(aes(x=age, y=los))+
labs(x="Age", y="Length of Stay", title = "Length of Stay by Age", caption="The average length of stay is typically longer for people around the age of 30")
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = sex))+
labs(x='Age',
y='Sex',
title='Age Distributions Based on Sex',
caption='A box plot displaying summary statistics for patient age for each sex.')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=tot)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Total Charge',
title = 'Total Charge by Age and Sex',
caption = 'Most higher charges occur in very young patients and some middle-age males.')
df %>% group_by(sex,age) %>%
summarise(mean_charge = mean(tot)) %>% ggplot() +
geom_col(aes(x=age, y=mean_charge, fill=sex), position = 'dodge') +
labs(x='Age',
y='Average Total Charge',
fill = 'Sex',
title = 'Average Total Charge by Age and Sex',
caption = 'There is a peak in average change at the age of 15, especially for males. The average total charge generally increases until age 70 and then decreases after. And males generally have the highest average total charges for most ages.')
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = provider))+
labs(x='Age',
y='Provider',
title='Age Distributions Based on Provider',
caption='A box plot displaying summary statistics for patient age for each provider.')
View(df1)
#df = read_sas('hdd0318cy.sas7bdat')
df = read_csv('MaseraEmilyMidterm.csv')
View(df)
library(ggplot2)
df$sex = case_when(df$sex == 1 ~ 'Male',
df$sex == 2 ~ 'Female',
TRUE ~ 'Unknown')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=los)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Length of Stay',
title = 'Length of Stay by Age and Sex',
caption = 'Younger people of both genders seem to generally have longer stays than older people. The plots are similar between the two genders.')
df %>% ggplot()+
geom_density(mapping = aes(x = age)) +
labs(x="Age", y="Density", title = "Age Distribution", caption='It is more common that people in their 60s are admitted than any other age range.')
df %>% ggplot()+
geom_density(mapping = aes(x = age, color=provider))+
labs(x="Age", y="Density", title = "Age Distribution by Provider", caption='Almost all of the providers have similar age distributions except for 7214 and 7216.')
df %>% ggplot()+
geom_bar(mapping = aes(x = pt_state))+
labs(x="State of Patient", y="Count", title = "State Location of Patients Distribution", caption='Rhode Island is the most common state.')
df %>% ggplot()+
geom_bar(mapping = aes(x = sex))+
labs(x="Sex", y="Count", title = "Sex Distribution", caption="Females are most commonly admitted")
df %>% ggplot()+geom_point(aes(x=age, y=los))+
labs(x="Age", y="Length of Stay", title = "Length of Stay by Age", caption="The average length of stay is typically longer for people around the age of 30")
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = sex))+
labs(x='Age',
y='Sex',
title='Age Distributions Based on Sex',
caption='A box plot displaying summary statistics for patient age for each sex.')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=tot)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Total Charge',
title = 'Total Charge by Age and Sex',
caption = 'Most higher charges occur in very young patients and some middle-age males.')
df %>% group_by(sex,age) %>%
summarise(mean_charge = mean(tot)) %>% ggplot() +
geom_col(aes(x=age, y=mean_charge, fill=sex), position = 'dodge') +
labs(x='Age',
y='Average Total Charge',
fill = 'Sex',
title = 'Average Total Charge by Age and Sex',
caption = 'There is a peak in average change at the age of 15, especially for males. The average total charge generally increases until age 70 and then decreases after. And males generally have the highest average total charges for most ages.')
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = provider))+
labs(x='Age',
y='Provider',
title='Age Distributions Based on Provider',
caption='A box plot displaying summary statistics for patient age for each provider.')
library(ggplot2)
df$sex = case_when(df$sex == 1 ~ 'Male',
df$sex == 2 ~ 'Female',
TRUE ~ 'Unknown')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=los)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Length of Stay',
title = 'Length of Stay by Age and Sex',
caption = 'Younger people of both genders seem to generally have longer stays than older people. The plots are similar between the two genders.')
df %>% ggplot()+
geom_density(mapping = aes(x = age)) +
labs(x="Age", y="Density", title = "Age Distribution", caption='It is more common that people in their 60s are admitted than any other age range.')
df %>% ggplot()+
geom_density(mapping = aes(x = age, color=provider))+
labs(x="Age", y="Density", title = "Age Distribution by Provider", caption='Almost all of the providers have similar age distributions except for 7214 and 7216.')
df %>% ggplot()+
geom_bar(mapping = aes(x = pt_state))+
labs(x="State of Patient", y="Count", title = "State Location of Patients Distribution", caption='Rhode Island is the most common state.')
df %>% ggplot()+
geom_bar(mapping = aes(x = sex))+
labs(x="Sex", y="Count", title = "Sex Distribution", caption="Females are most commonly admitted")
df %>% ggplot()+geom_point(aes(x=age, y=los))+
labs(x="Age", y="Length of Stay", title = "Length of Stay by Age", caption="The average length of stay is typically longer for people around the age of 30")
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = sex))+
labs(x='Age',
y='Sex',
title='Age Distributions Based on Sex',
caption='A box plot displaying summary statistics for patient age for each sex.')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=tot)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Total Charge',
title = 'Total Charge by Age and Sex',
caption = 'Most higher charges occur in very young patients and some middle-age males.')
df %>% group_by(sex,age) %>%
summarise(mean_charge = mean(tot)) %>% ggplot() +
geom_col(aes(x=age, y=mean_charge, fill=sex), position = 'dodge') +
labs(x='Age',
y='Average Total Charge',
fill = 'Sex',
title = 'Average Total Charge by Age and Sex',
caption = 'There is a peak in average change at the age of 15, especially for males. The average total charge generally increases until age 70 and then decreases after. And males generally have the highest average total charges for most ages.')
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = provider))+
labs(x='Age',
y='Provider',
title='Age Distributions Based on Provider',
caption='A box plot displaying summary statistics for patient age for each provider.')
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
plot(forest_ranger)
tuneGrid = expand.grid(maxdepth = 2:10)
trControl = trainControl(method = "cv",
number = 5)
library(caret)
tuneGrid = expand.grid(maxdepth = 2:10)
trControl = trainControl(method = "cv",
number = 5)
tree_approach2 <- train(target~., data=df_train,
method = "rpart2", trControl
=trControl, tuneGrid = tuneGrid)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(caret)
tuneGrid = expand.grid(maxdepth = 2:10)
trControl = trainControl(method = "cv",
number = 5)
tree_approach2 <- train(target~., data=df_train,
method = "rpart2", trControl
=trControl, tuneGrid = tuneGrid)
tree_approach2 <- train(target~., data=df_train,
method = "rpart2", trControl
=trControl, tuneGrid = tuneGrid)
library(haven)
library(tidyverse)
library(dplyr)
#df = read_sas('hdd0318cy.sas7bdat')
df = read_csv('MaseraEmilyMidterm.csv')
df1 = df %>% filter(yod == 18)
df = df1 %>% select("yod", "payfix","pay_ub92","age",
"sex","raceethn","provider","moa",
"yoa","mod","admtype", "asource" ,
"preopday" ,"los", "service" , "icu","ccu",
"dispub92", "payer"  ,"drg","trandb",
"randbg","randbs","orr", "anes","seq",
"lab","dtest", "ther","blood","phar",
"other","patcon","bwght","total","tot" ,
"ecodub92","b_wt","pt_state","diag_adm","ancilar" ,
"campus","er_fee","er_chrg","er_mode","obs_chrg",
"obs_hour","psycchrg","nicu_day")
write_csv(df1, 'MaseraEmilyMidterm.csv' )
colSums(is.na(df1))
df = df %>% select(-payfix, -raceethn, -admtype, -asource, -preopday, -bwght, -ecodub92, -pt_state, -diag_adm, -er_mode, -obs_hour, -nicu_day)
df %>% count(moa) %>% arrange(-n)
##October admitted the most number of patients##
df %>% filter(sex=='1') %>% count(moa) %>% arrange(-n)
##October also admitted the most male patients##
df %>% filter(sex=='2', age>='13'& age<='19') %>%
count(moa) %>% arrange(-n)
## March has the most number of teenage female patients##
df %>% filter(sex=='2', moa=='10') %>% count(provider) %>% arrange(-n)
##provider 7205 has the most number of female patietns in October
df %>% group_by(sex) %>% summarise(average_age = mean(age)) %>% arrange(-average_age)
##Male patients are older on average##
df %>% group_by(moa) %>% summarise(average_age = mean(age)) %>% arrange(-average_age)
##January has the oldest average age##
df %>% group_by(provider) %>% summarise(average_tot = mean(tot)) %>% arrange(-average_tot)
##Provider 7215 has the highest total charge##
df %>% group_by(provider) %>% filter(sex=='1', age>='13'& age<='19') %>% summarise(average_tot = mean(tot)) %>% arrange(average_tot)
##provider 7206 has the least total charge for teenage male on average##
df$season <- case_when(df$moa >=3 & df$moa < 6 ~ 'Spring', df$moa >= 6 & df$moa < 9 ~'Summer', df$moa >=9 & df$moa <12 ~ 'Fall', TRUE ~ 'Winter')
df %>% group_by(season) %>% summarise(average_los = mean(los)) %>% arrange(-average_los)
##Summer has the longest length of stay on average##
df %>%
filter(sex=='1', age=='20', season=='Fall', los=='1') %>%
summarise(average_tot = mean(tot)) %>%
arrange(average_tot)
##On average, a 20 year old male gets charged $16,511 for staying 1 day in the fall season##
library(ggplot2)
df$sex = case_when(df$sex == 1 ~ 'Male',
df$sex == 2 ~ 'Female',
TRUE ~ 'Unknown')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=los)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Length of Stay',
title = 'Length of Stay by Age and Sex',
caption = 'Younger people of both genders seem to generally have longer stays than older people. The plots are similar between the two genders.')
df %>% ggplot()+
geom_density(mapping = aes(x = age)) +
labs(x="Age", y="Density", title = "Age Distribution", caption='It is more common that people in their 60s are admitted than any other age range.')
df %>% ggplot()+
geom_density(mapping = aes(x = age, color=provider))+
labs(x="Age", y="Density", title = "Age Distribution by Provider", caption='Almost all of the providers have similar age distributions except for 7214 and 7216.')
df %>% ggplot()+
geom_bar(mapping = aes(x = campus))+
labs(x="Campus", y="Count", title = "Campus of Patients Distribution", caption='Campus 0 is the most common campus of the patient to be on.')
df %>% ggplot()+
geom_bar(mapping = aes(x = sex))+
labs(x="Sex", y="Count", title = "Sex Distribution", caption="Females are most commonly admitted")
df %>% ggplot()+geom_point(aes(x=age, y=los))+
labs(x="Age", y="Length of Stay", title = "Length of Stay by Age", caption="The average length of stay is typically longer for people around the age of 30")
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = sex))+
labs(x='Age',
y='Sex',
title='Age Distributions Based on Sex',
caption='A box plot displaying summary statistics for patient age for each sex.')
df %>% ggplot() + geom_point(mapping=aes(x=age, y=tot)) + facet_wrap(~sex) +
labs(x='Age',
y = 'Total Charge',
title = 'Total Charge by Age and Sex',
caption = 'Most higher charges occur in very young patients and some middle-age males.')
df %>% group_by(sex,age) %>%
summarise(mean_charge = mean(tot)) %>% ggplot() +
geom_col(aes(x=age, y=mean_charge, fill=sex), position = 'dodge') +
labs(x='Age',
y='Average Total Charge',
fill = 'Sex',
title = 'Average Total Charge by Age and Sex',
caption = 'There is a peak in average change at the age of 15, especially for males. The average total charge generally increases until age 70 and then decreases after. And males generally have the highest average total charges for most ages.')
df %>%
ggplot()+
geom_boxplot(mapping = aes(x = age, y = provider))+
labs(x='Age',
y='Provider',
title='Age Distributions Based on Provider',
caption='A box plot displaying summary statistics for patient age for each provider.')
library(gganimate)
df %>% ggplot()+
geom_bar(mapping = aes(x = sex)) + transition_states(age) +
labs(x="Sex", y="Count", title = "Sex Distribution by Age", caption="This show the gender most commonly admitted for each age")
df$target = case_when(df$tot < median(df$tot) ~ 'low',
TRUE ~ 'high')
library(caret)
df <- df %>% filter('raceethn'!='', 'admtype'!='')
df$tot2 <- ifelse(df$tot<median(df$tot),'low', 'high')
df <- df %>%
mutate(target = as.factor(tot2),
sex = as.factor(sex),
raceehtn = as.factor('raceethn'),
campus = as.factor(campus),
moa = as.factor(moa),
mod = as.factor(mod),
admtype=as.factor('admtype'))
df <- df %>%
mutate(age = as.numeric(age),
los = as.numeric(los))
df <- df %>% select('target','age','sex','provider','moa','mod','campus','los')
set.seed(2020)
splitIndex <- createDataPartition(df$target, p = .90, list=FALSE)
df_train <- df[ splitIndex,]
df_test <- df[-splitIndex,]
library(rpart)
tree_model <- rpart(target ~ ., data = df_train,
control = rpart.control(maxdepth = 3))
library(rattle)
fancyRpartPlot(tree_model)
tree_model$variable.importance
barplot(tree_model$variable.importance)
pred <- predict(tree_model, df_test, type = "class")
cm <- confusionMatrix(data = pred, reference = df_test$target)
cm$overall[1]
library(caret)
tuneGrid = expand.grid(maxdepth = 2:10)
trControl = trainControl(method = "cv",
number = 5)
tree_approach2 <- train(target~., data=df_train,
method = "rpart2", trControl
=trControl, tuneGrid = tuneGrid)
plot(tree_approach2)
trControl1 = trainControl(method = "cv",
number = 5)
tuneGrid1 = expand.grid(mtry = 2:4,
splitrule = c('gini', 'extratrees'),
min.node.size = c(2:5))
forest_ranger <- train(target~., data=df_train,
method = "ranger",
trControl = trControl1,
tuneGrid = tuneGrid1)
library(caret)
tuneGrid = expand.grid(maxdepth = 2:10)
trControl = trainControl(method = "cv",
number = 5)
tree_approach2 <- train(target~., data=df_train,
method = "rpart2", trControl
=trControl, tuneGrid = tuneGrid)
plot(tree_approach2)
trControl1 = trainControl(method = "cv",
number = 5)
tuneGrid1 = expand.grid(mtry = 2:4,
splitrule = c('gini', 'extratrees'),
min.node.size = c(2:5))
forest_ranger <- train(target~., data=df_train,
method = "ranger",
trControl = trControl1,
tuneGrid = tuneGrid1)
plot(forest_ranger)
plot(forest_ranger)
library(caret)
tuneGrid = expand.grid(maxdepth = 2:10)
trControl = trainControl(method = "cv",
number = 5)
tree_approach2 <- train(target~., data=df_train,
method = "rpart2", trControl
=trControl, tuneGrid = tuneGrid)
